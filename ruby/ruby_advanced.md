# Ruby応用
## 3_プリミティブ型と文字列型をラップする
超絶ざっくりいうと、**`ただの文字列や数値をそのまま使わずに、できるだけオブジェクトで包んで使おうね`**という話なのかなと。
価格だったら、
```
🙅‍♀️`価格 = 1000`  // ただの数字
🙆`価格 = 価格オブジェクト(1000)`  // 数字を価格オブジェクトで包んでいる
```
という具合かな。むずかし～～～～！！！！  
  
**▼オブジェクトで包む（ラップする）ことのメリット**
1. 特別な機能を追加できる
2. 間違いを防げる
3. 同じ処理を何度も書かなくて済む

## 4_ファーストクラスコレクションを使用する
※Claudeと壁打ち  
  
ファーストクラスコレクション = **「バラバラの物をきちんとした箱に入れて、その箱に便利な機能を付ける」**こと  
**メリット：**  
- 物が散らからない
- 決まったやり方で扱える
- 便利な機能が使える
- 間違いが起こりにくい
プログラムでも同じで、データをきちんとした「クラス」という箱に入れることで、より安全で使いやすいコードが書けるようになる  

## 5_Getter・Setter・プロパティを使用しない
※Claudeと壁打ち  
  
**問題：よそのクラスの中身を見すぎること**  
自動販売機のプログラムで、「在庫が0個かどうか」を確認するために、在庫クラスの中の数字を直接見ていました。  
これは、他のクラスの秘密を覗き見しているようなもので、良くありません。  
   
**解決方法：それぞれのクラスに専用の方法を作る**  
在庫クラスには「空っぽかどうか」を教えてくれる`empty?`という方法を作りました。  
これで、在庫の数字を直接見なくても、空っぽかどうかがわかります。  
  
同じように、お金のクラス、100円玉のクラス、飲み物のクラスにも、それぞれ専用の方法を作りました。  
  
例えば：  
- 100円玉クラス：「お釣りが足りるか？」を教える方法
- 飲み物クラス：「コーラかどうか？」を教える方法

**なぜこれが大切？**  
このようにすると、プログラムが読みやすくなり、間違いが少なくなります。また、後でプログラムを変更するときも簡単になります。  
つまり、「自分のことは自分で判断する」という考え方で、それぞれのクラスに責任を持たせることが大切です。  

▼補足  
**お金のクラス（Moneyクラス）**
もともと：コインクラスで金額を直接取り出せる方法（getter）がありました。  
これは他のクラスが「100円だよ」という数字を直接見ることができる状態でした。  
新しく作った方法：お金を足し算する`add`という方法と、数字に変換する`to_i`という方法を作りました。  
これで、お金の計算は全部お金クラスが自分でやるようになりました。  
  
**100円玉のクラス（StockOf100yen）**  
もともと：100円玉が何枚あるかを外から数えて、足りるかどうかを外で判断していました。また、4枚取り出すときも外から1枚ずつ取っていました。  
新しく作った方法：`not_have_change?`でお釣りが足りるかを自分で判断し、`take_of_change`で4枚まとめて取り出すようになりました。  

**飲み物のクラス（Drinkクラス）**  
もともと：飲み物の種類を外から見て「コーラかどうか」を外で判断していました。飲み物の種類を直接見ることができる状態でした。  
新しく作った方法：`coke?`、`diet_coke?`、`tea?`という方法を作って、飲み物が自分で「私はコーラです」「私はお茶です」と答えられるようになりました。  

## 6_1つのクラスにつきインスタンス変数は2つまでにする
タイトルそのまま。1つのクラスにつきインスタンス変数は2つまでにしようね！の回。

## 7_else句を使用しない
**`else句を多用して複雑なコードを書くことは可読性を下げるからやめようね`**、の巻。  
Ruby応用の課題2以降は、[オブジェクト指向エクササイズ](https://qiita.com/kobayashimakoto/items/5ece3a381432d0aa0293) なるものに則って、  
とある一連のRubyファイルたちを改修していくという内容になっています。  
Ruby応用の序盤は、ひたすらコードもクラスも増えてややこしくなるだけじゃん！！とぶーたれてましたが、だんだんと役割分担が見える展開になってきました。  
自分としては、最初のコードと比べると可読性は未だ難ありと感じるものの、**`メンテナンスのしやすさ`**の観点から大事だというのはちょっとわかる気がしてきました。  
ちょっとジャンルは異なりますが、先日の[データベース＆SQL 完全マスター講座](https://school.runteq.jp/v2/runteq_events/1391)でひさじゅ校長が仰っていた　**`正規化 / 非正規化`** の話を思い出しました。
正規化は、**`テーブルを細かく分けることで一部のデータが書き換わったときに変更する箇所を最小限にする役割`**があるけど、このオブジェクト指向もそういう側面があるのかなと。  


## テンプレ
